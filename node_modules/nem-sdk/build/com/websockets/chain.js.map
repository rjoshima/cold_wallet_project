{"version":3,"sources":["../../../src/com/websockets/chain.js"],"names":["checkReadyState","connector","self","socket","readyState","OPEN","subscribeNewBlocks","callback","stompClient","subscribe","data","JSON","parse","body","subscribeNewHeight","module","exports","requests","height","blocks"],"mappings":";;AAAA;;AACA;;;;;;AAEA;;;;;;;AAOA,IAAIA,kBAAkB,SAAlBA,eAAkB,CAASC,SAAT,EAAoB;AACzC,MAAIC,OAAOD,SAAX;AACA,MAAI,iBAAgBC,KAAKC,MAAL,CAAYC,UAAZ,KAA2B,eAAcC,IAAzD,GAAgEH,KAAKC,MAAL,CAAYC,UAAZ,KAA2B,uBAAWC,IAA1G,EAAgH;AACzG,WAAO,KAAP;AACH;AACD,SAAO,IAAP;AACH,CAND;;AAQA;;;;;;;;AAQA,IAAIC,qBAAqB,SAArBA,kBAAqB,CAASL,SAAT,EAAoBM,QAApB,EAA8B;AACtD,MAAIL,OAAOD,SAAX;AACA,MAAI,CAACD,gBAAgBC,SAAhB,CAAL,EAAiC;AAC1B,WAAO,KAAP;AACH;AACJC,OAAKM,WAAL,CAAiBC,SAAjB,CAA2B,SAA3B,EAAsC,UAASC,IAAT,EAAe;AAC9CH,aAASI,KAAKC,KAAL,CAAWF,KAAKG,IAAhB,CAAT;AACH,GAFJ;AAGA,CARD;;AAUA;;;;;;;;AAQA,IAAIC,qBAAqB,SAArBA,kBAAqB,CAASb,SAAT,EAAoBM,QAApB,EAA8B;AACtD,MAAIL,OAAOD,SAAX;AACA,MAAI,CAACD,gBAAgBC,SAAhB,CAAL,EAAiC;AAC1B,WAAO,KAAP;AACH;AACJC,OAAKM,WAAL,CAAiBC,SAAjB,CAA2B,aAA3B,EAA0C,UAASC,IAAT,EAAe;AAClDH,aAASI,KAAKC,KAAL,CAAWF,KAAKG,IAAhB,CAAT;AACN,GAFD;AAGA,CARD;;AAUAE,OAAOC,OAAP,GAAiB;AAChBC,YAAU,EADM;AAIhBR,aAAW;AACVS,YAAQJ,kBADE;AAEVK,YAAQb;AAFE;AAJK,CAAjB","file":"chain.js","sourcesContent":["import { SockJS as SockJSBrowser } from '../../external/sockjs-0.3.4';\nimport SockJSNode from 'sockjs-client';\n\n/**\n * Check if socket is open\n *\n * @param {object} connector - A connector object\n *\n * @return {boolean} - True if open, false otherwise\n */\nlet checkReadyState = function(connector) {\n\tvar self = connector;\n\tif (SockJSBrowser ? self.socket.readyState !== SockJSBrowser.OPEN : self.socket.readyState !== SockJSNode.OPEN) {\n        return false;\n    } \n    return true;\n}\n\n/**\n * Subscribe to the new blocks channel \n *\n * @param {object} connector - A connector object\n * @param {function} callback - A callback function where data will be received\n *\n * @return the received data in the callback\n */\nlet subscribeNewBlocks = function(connector, callback) {\n\tvar self = connector;\n\tif (!checkReadyState(connector)) {\n        return false;\n    }\n\tself.stompClient.subscribe('/blocks', function(data) {\n        callback(JSON.parse(data.body));\n    });\n}\n\n/**\n * Subscribe to the new height channel\n *\n * @param {object} connector - A connector object\n * @param {function} callback - A callback function where data will be received\n *\n * @return the received data in the callback\n */\nlet subscribeNewHeight = function(connector, callback) {\n\tvar self = connector;\n\tif (!checkReadyState(connector)) {\n        return false;\n    }\n\tself.stompClient.subscribe('/blocks/new', function(data) {\n        callback(JSON.parse(data.body));\n\t});\n}\n\nmodule.exports = {\n\trequests: {\n\t\t\n\t},\n\tsubscribe: {\n\t\theight: subscribeNewHeight,\n\t\tblocks: subscribeNewBlocks\n\t}\t\n}"]}